CREATE OR REPLACE PROCEDURE AGE_MEAN IS
  BORN_IN_2000  NUMBER(6,3);  -- Πόσοι ωφελούμενοι γεννήθηκαν τη δεκαετία του 2000 --
  BORN_IN_1990  NUMBER(6,3);  -- Πόσοι ωφελούμενοι γεννήθηκαν τη δεκαετία του 1990 --
  BORN_IN_1980  NUMBER(6,3);
  BORN_IN_1970  NUMBER(6,3);
  BORN_IN_1960  NUMBER(6,3);
  BORN_IN_1950  NUMBER(6,3);
  COUNT_BENEFICIARY NUMBER;   -- Πόσοι ωφελούμενοι υπάρχουν συνολικά (Το έτος γέννησης είναι δεν είναι κενό, οπότε δεν ελέγχεται αν είναι NULL)) --
BEGIN
-- Υπολόγισε το πλήθος των ωφελούμενων --
  SELECT COUNT(BIRTH_YEAR) INTO COUNT_BENEFICIARY FROM BENEFICIARY;
  SELECT COUNT(BIRTH_YEAR) INTO BORN_IN_2000 FROM BENEFICIARY WHERE BIRTH_YEAR >= 2000 AND BIRTH_YEAR < 2010;
  SELECT COUNT(BIRTH_YEAR) INTO BORN_IN_1990 FROM BENEFICIARY WHERE BIRTH_YEAR >= 1990 AND BIRTH_YEAR < 2000;
  SELECT COUNT(BIRTH_YEAR) INTO BORN_IN_1980 FROM BENEFICIARY WHERE BIRTH_YEAR >= 1980 AND BIRTH_YEAR < 1990;
  SELECT COUNT(BIRTH_YEAR) INTO BORN_IN_1970 FROM BENEFICIARY WHERE BIRTH_YEAR >= 1970 AND BIRTH_YEAR < 1980;
  SELECT COUNT(BIRTH_YEAR) INTO BORN_IN_1960 FROM BENEFICIARY WHERE BIRTH_YEAR >= 1960 AND BIRTH_YEAR < 1970;
  SELECT COUNT(BIRTH_YEAR) INTO BORN_IN_1950 FROM BENEFICIARY WHERE BIRTH_YEAR >= 1950 AND BIRTH_YEAR < 1960;
-- Μετέτρεψε το πλήθος των ωφελουμένων σε μέσο όρο--
  BORN_IN_2000 := BORN_IN_2000 / COUNT_BENEFICIARY * 100;
  BORN_IN_1990 := BORN_IN_1990 / COUNT_BENEFICIARY * 100;
  BORN_IN_1980 := BORN_IN_1980 / COUNT_BENEFICIARY * 100;
  BORN_IN_1970 := BORN_IN_1970 / COUNT_BENEFICIARY * 100;
  BORN_IN_1960 := BORN_IN_1960 / COUNT_BENEFICIARY * 100;
  BORN_IN_1950 := BORN_IN_1950 / COUNT_BENEFICIARY * 100;
 -- Εμφάνισε τα αποτελέσματα --
  DBMS_OUTPUT.PUT_LINE('Mean of those born in 2000s is ' || BORN_IN_2000 || '%');
  DBMS_OUTPUT.PUT_LINE('Mean of those born in 1990s is ' || BORN_IN_1990 || '%');
  DBMS_OUTPUT.PUT_LINE('Mean of those born in 1980s is ' || BORN_IN_1980 || '%');
  DBMS_OUTPUT.PUT_LINE('Mean of those born in 1970s is ' || BORN_IN_1970 || '%');
  DBMS_OUTPUT.PUT_LINE('Mean of those born in 1960s is ' || BORN_IN_1960 || '%');
  DBMS_OUTPUT.PUT_LINE('Mean of those born in 1950s is ' || BORN_IN_1950 || '%');
END;

-- Δοκιμή με τον παρακάτω κώδικα --
BEGIN
  AGE_MEAN;
END;
